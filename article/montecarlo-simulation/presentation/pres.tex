\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{adjustbox}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{lstlinebgrd}
\usepackage{multirow}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{ulem}

\fontseries{bx}
\selectfont

\setlength{\tabcolsep}{18pt}

\graphicspath{{./gfx/}}

\usetikzlibrary{fit}

\usetheme{Madrid}

\title[Cloud MCS]{Improving Cloud Simulation Using the Monte-Carlo Method}
\author[Luke Bertot]{\underline{Luke Bertot} \and St√©phane Genaud \and Julien Gossa\\}
\institute[ICPS]{%
	\{lbertot,genaud,gossa\}@unistra.fr\\
	\medskip{}
	ICPS -- Scientific and Parallel Computing research group\\ 
	at ICube, University of Strasbourg CNRS}

\date[Euro-Par 2018]{Euro-Par, August 2018}

\titlegraphic{\raisebox{-0.5\height}{\includegraphics[width=1.5cm]{/icube-png.png}}\hspace*{1cm}~\raisebox{-0.5\height}{\includegraphics[width=2cm]{uds.png}}\hspace*{1cm}~\raisebox{-0.5\height}{\includegraphics[width=1.5cm]{Logo_CNRS.png}}}

\setbeamertemplate{navigation symbols}{}%remove navigation symbols

\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}


\AtBeginSection[]{%
	\begin{frame}
		\begin{beamercolorbox}[sep=8pt,center,shadow=true,rounded=true]{title}
			\usebeamerfont{title}\insertsectionhead\par
		\end{beamercolorbox}
	 \end{frame}
}

\begin{document}

\begin{frame}
\maketitle{}
\end{frame}

\begin{frame}
	\frametitle{Outline}
	\tableofcontents
\end{frame}

\section{Cloud Brokering}

\begin{frame}
	\frametitle{Scientific Workloads}
	\resizebox{\textwidth}{!}{\input{gfx/montage.tex}}
%	preesent workflows we are working with.
\end{frame}

\begin{frame}
	\frametitle{Cloud Scheduling}
	\resizebox{\textwidth}{!}{\input{gfx/s1.tex}} \\[1cm]
	\begin{overlayarea}{\textwidth}{.5\textheight}
		\only<2>{
			  \begin{itemize}
				\item bla blah 1
				\item bla blah 2
				\item bla blah 3
			  \end{itemize}
		}
		\only<3>{
		%\resizebox{!}{.5\textheight}{\input{img/gossiping.pdftex_t}}
		\resizebox{\textwidth}{!}{\input{gfx/s2.tex}}
		}
		\only<4>{
		%\resizebox{!}{.5\textheight}{\input{img/gossiping.pdftex_t}}
		\resizebox{\textwidth}{!}{\input{gfx/s3.tex}}
		}
	\end{overlayarea}
\end{frame}

%\begin{frame}
%	\frametitle{Variability in Cloud environments}
%	\resizebox{\textwidth}{!}{\input{gfx/strat2.tex}}
%\end{frame}

\begin{frame}
	\frametitle{The Schlouder cloud broker}
	\resizebox{\textwidth}{!}{\input{gfx/schlouder.tex}}
	%( present schlouder ) 
\end{frame}


%\section{Cloud Simulations}

\begin{frame}
	\frametitle{SimSchlouder}
	\resizebox{\textwidth}{!}{\input{gfx/simschlouder.tex}}
	%present simschlouder limits to that approach
\end{frame}

\begin{frame}
	\frametitle{Stochastic Simulations}
	\begin{itemize}
		\item{} All inputs (task runtimes) are now random variables (RVs)
		\item{} All outputs are are also random variables
	\end{itemize}
	\pause
	Numerical solutions exists for stochastic DAGs, but :
	\begin{itemize}
		\item{} Require RVs to be independent,
		\item{} Involves both the PDF and the CDF,
		\item{} Requires a static DAG.
	\end{itemize}
	\pause
	\begin{block}{}
		Numerical resolution is not adapted to stochastic cloud
		simulations.
	\end{block}
\end{frame}

\section{Monte-Carlo Simulations}

\begin{frame}
	\frametitle{Monte Carlo Simulations}
	\resizebox{\textwidth}{!}{\input{gfx/mc-process.tex}}
\end{frame}

\begin{frame}
	\frametitle{Experiment Rationale}
\begin{overlayarea}{\textwidth}{\textheight}
	\only<1>{%
	\begin{block}{Validating deterministic simulator}
		\begin{itemize}
			\item{} Execute a workload in a real environment
			\item{} Run the simulation based on the observed
				execution.
			\item{} Compare the observed execution to the simulated
				one
		\end{itemize}
	\end{block}
}
\only<2->{%
	\begin{block}{Validating \textbf{stochastic} simulator}
		\begin{itemize}
			\item{} Execute \textbf{many} workloads in a real 
				environment
			\item{} Run the \textbf{MCS} base on the observed tasks
				distributions
			\item{} Compare the observed \textbf{distribution} to the simulated
				one
		\end{itemize}
	\end{block}\\[1cm]
}
\only<3->{
	\begin{itemize}
		\item{} The task model must remain simple enough that it could
			be build in real life conditions.
	\end{itemize}
}
\end{overlayarea}
\end{frame}

\begin{frame}
	\frametitle{Experimental Setup : In vivo}
	\begin{block}{Cloud}
	\begin{itemize}
		\item{} Private testbed
		\item{} 4 Nodes
		\item{} 2 $\times$ Intel Xeon X5650 (2.67 GHz)
		\item{} Openstack 2014.4 with KVM on Ubuntu
		\item{} Network not isolated
	\end{itemize}
	\end{block}
	\begin{block}{Applications}
	\begin{itemize}
		\item{} Montage (Workflow, 184 tasks)
		\item{} OMSSA (BoT, 223 tasks)
		\item{} Data accessible over NFS
		\item{} Scheduled using ASAP and AFAP
	\end{itemize}
	\end{block}
\end{frame}

\begin{frame}
	\frametitle{In-Vivo observations}
	\includegraphics[width=\textwidth]{gfx/real.pdf}
\end{frame}

\begin{frame}
	\frametitle{Cloud Variability}
 	(Leitner)
\end{frame}

\begin{frame}
	\frametitle{Input model}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Experimental setup: In silico}
\begin{lstlisting}[language=bash,basicstyle=\tt\footnotesize,backgroundcolor=\color{gray!10},
morekeywords={SETUP_DIR,TU_ARG,PRE_COMMAND_SETUP,POST_COMMAND_DATA,SIM_ARG,INCLUDE},
keywordstyle=\color{red!90},commentstyle=\color{blue!70}]
#### MCsim.cfg ####
# setup
SETUP_DIR ./setup/xp-dir
PRE_COMMAND_SETUP ./generate_sims.py -t taskmodel.task \
> /tmp/sim-list.cfg
POST_COMMAND_DATA ./result_aggregation.sh > metric.dat
# simulations
SIM_ARG 1 simschlouder.SimSchlouder
SIM_ARG 2 platform.xml 
SIM_ARG 3 icps-cloud-config.xml
INCLUDE /tmp/sim-list.cfg
SIM_ARG 6 real_walltimes
\end{lstlisting}
\begin{lstlisting}[language=bash,basicstyle=\tt\footnotesize,backgroundcolor=\color{gray!10},
morekeywords={SETUP_DIR,TU_ARG,PRE_COMMAND_SETUP,POST_COMMAND_DATA,SIM_ARG,INCLUDE},
keywordstyle=\color{red!90},commentstyle=\color{blue!70}]
#### sim-list.cfg ####
SIM_ARG 4:1 /tmp/sims/xp1.tasks
SIM_ARG 4:2 /tmp/sims/xp2.tasks
	[...]
SIM_ARG 4:500 /tmp/sims/xp500.tasks
SIM_ARG 5:ASAP asap
SIM_ARG 5:AFAP afap
\end{lstlisting}
\end{frame}


\section{Results}

\begin{frame}
	\frametitle{Simulation Results}
	\begin{center}
	\includegraphics[height=0.6\textheight]{gfx/fit.pdf}\\
	{\small
	\begin{tabular}{lccc}
		\toprule
		Heuristic~&\multicolumn{2}{c}{~Makespan (Size of
		CI)~}&~BTU\\
		 & CI 95\% & CI 99\% &\\
		\midrule
		ASAP& 90\% (3\%)& 98\% (5\%)& 100\%\\
		AFAP& 92\% (4\%)& 100\% (6\%)& 100\%\\
		\bottomrule
	\end{tabular}
	}
	\end{center}
\end{frame}

\begin{frame}
	\frametitle{When the speaker pretends to ask a question the answer is
	always no.}
	\includegraphics[width=\textwidth]{gfx/int.pdf}
\end{frame}

\begin{frame}
	number iter
\end{frame}
\section{conclusion}
\end{document}
% vim: spell spelllang=en
